<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>إرسال الطلب</title>
  <!-- تضمين مكتبات Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
  <h2>نموذج الطلب</h2>
  <!-- إنشاء نموذج لجمع بيانات المستخدم -->
  <form id="orderForm">
      <label for="name">الاسم:</label>
      <input type="text" id="name" required>
      <br><br>

      <label for="phone">رقم الهاتف:</label>
      <input type="text" id="phone" required>
      <br><br>

      <label for="address">العنوان:</label>
      <input type="text" id="address" required>
      <br><br>

      <button type="submit">إرسال الطلب</button>
  </form>

  <script>
    // --- خطوة 1: تهيئة Firebase ---
    // الصق هنا إعدادات firebaseConfig التي نسختها من Firebase Console
    const firebaseConfig = {
        apiKey: "AIzaSyD4NiKlU6SIJVxbnbk60SkRt8BNqlonk-U",
        authDomain: "mina-project-c10b2.firebaseapp.com",
        projectId: "mina-project-c10b2",
        storageBucket: "mina-project-c10b2.firebasestorage.app",
        messagingSenderId: "1088494592963",
        appId: "1:1088494592963:web:de6a787bc3b1694ccd1376"
      };
    // تهيئة Firebase باستخدام الإعدادات
    firebase.initializeApp(firebaseConfig);

    // --- خطوة 2: الحصول على مرجع لقاعدة البيانات ---
    // هذا المرجع يساعدنا على التواصل مع Realtime Database
    var database = firebase.database();

    // --- خطوة 3: التقاط بيانات النموذج وإرسالها ---
    document.getElementById("orderForm").addEventListener("submit", function(event) {
      event.preventDefault(); // منع تحميل الصفحة عند الضغط على زر الإرسال

      // استخراج البيانات من حقول النموذج
      var name = document.getElementById("name").value;
      var phone = document.getElementById("phone").value;
      var address = document.getElementById("address").value;

      // إنشاء كائن يحتوي على بيانات الطلب
      var orderData = {
        name: name,
        phone: phone,
        address: address,
        createdAt: new Date().toISOString() // تسجيل التاريخ والوقت الحالي
      };

      // رفع البيانات إلى قاعدة بيانات Firebase في الفرع "orders"
      database.ref("orders").push(orderData, function(error) {
        if (error) {
          // في حال حدوث خطأ أثناء الرفع
          alert("حدث خطأ أثناء إرسال الطلب");
        } else {
          // عند نجاح عملية الرفع
          alert("تم إرسال الطلب بنجاح");
          // إعادة تعيين النموذج لتفريغ الحقول
          document.getElementById("orderForm").reset();
        }
      });
    });
  </script>
</body>
</html>
