<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>عرض الطلبات</title>
  <!-- تضمين مكتبات Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
  <h2>الطلبات المستلمة</h2>
  <!-- عنصر لعرض قائمة الطلبات -->
  <div id="ordersList"></div>

  <script>
    // --- تهيئة Firebase بنفس إعدادات التطبيق ---
    const firebaseConfig = {
        apiKey: "AIzaSyD4NiKlU6SIJVxbnbk60SkRt8BNqlonk-U",
        authDomain: "mina-project-c10b2.firebaseapp.com",
        projectId: "mina-project-c10b2",
        storageBucket: "mina-project-c10b2.firebasestorage.app",
        messagingSenderId: "1088494592963",
        appId: "1:1088494592963:web:de6a787bc3b1694ccd1376"
      };
    firebase.initializeApp(firebaseConfig);

    // --- الحصول على مرجع قاعدة البيانات ---
    var database = firebase.database();

    // --- قراءة بيانات الطلبات من قاعدة البيانات ---
    // عند كل تغيير في فرع "orders" سيتم استدعاء الدالة
    database.ref("orders").on("value", function(snapshot) {
      var ordersDiv = document.getElementById("ordersList");
      // تفريغ المحتوى القديم لكي لا تتكرر الطلبات
      ordersDiv.innerHTML = "";
      // المرور على كل طلب تم رفعه
      snapshot.forEach(function(childSnapshot) {
        var order = childSnapshot.val();
        // عرض الطلب في فقرة باستخدام innerHTML
        ordersDiv.innerHTML += "<p><strong>الاسم:</strong> " + order.name +
                                " | <strong>الهاتف:</strong> " + order.phone +
                                " | <strong>العنوان:</strong> " + order.address +
                                " | <strong>التاريخ:</strong> " + order.createdAt + "</p>";
      });
    });
  </script>
</body>
</html>
